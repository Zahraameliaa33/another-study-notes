<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zahra Amelia Learning Dashboard</title>
<style>
  /* ===== General Styles ===== */
  * { box-sizing: border-box; }
  body, html {margin:0;padding:0;font-family:'Inter',sans-serif;background:#f0f2f5;color:#333;overflow-x:hidden; min-width:320px;}
  a{text-decoration:none;color:inherit;}
  
  /* ===== Intro Splash ===== */
  #intro{position:fixed;top:0;left:0;width:100%;height:100%;background:#ffffff;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:10;transition:opacity 1s ease;}
  #intro.fade-out{opacity:0;pointer-events:none;}
  #intro img{width:150px;margin-bottom:20px;animation:logo-slide 1s ease forwards;}
  @keyframes logo-slide{0%{opacity:0;transform:translateY(-20px);}100%{opacity:1;transform:translateY(0);}}
  #intro h1{margin:0;font-size:32px;margin-bottom:25px;opacity:0;animation:name-fade 1s forwards 0.5s;color:#4A4A4A;}
  @keyframes name-fade{to{opacity:1;}}
  #enter-btn{padding:12px 30px;font-size:16px;border:none;background:linear-gradient(135deg,#4CAF50,#45A049);color:white;cursor:pointer;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);opacity:0;animation:btn-fade 1s forwards 1s;transition:all 0.3s ease;}
  #enter-btn:hover{transform:scale(1.05);box-shadow:0 6px 15px rgba(0,0,0,0.2);}
  @keyframes btn-fade{to{opacity:1;}}

  /* ===== Navbar ===== */
  #navbar{display:flex;justify-content:space-between;align-items:center;padding:10px 25px;background:#ffffff;box-shadow:0 2px 8px rgba(0,0,0,0.1);position:sticky;top:0;z-index:5;}
  #navbar .logo{font-weight:700;font-size:22px;color:#4CAF50;}
  #navbar nav a{margin-left:20px;font-weight:500;color:#555;transition:color 0.3s;}
  #navbar nav a:hover{color:#4CAF50;}
  #navbar input[type="text"]{padding:6px 12px;width:220px;border:1px solid #ddd;border-radius:8px;transition:all 0.3s;}
  #navbar input[type="text"]:focus{outline:none;border-color:#4CAF50;box-shadow:0 0 5px rgba(76,175,80,0.5);}

  /* ===== Main Content ===== */
  #main-content{padding:25px 30px;display:none;}
  .section{margin-bottom:40px;}
  .section h2 {
  text-align: center;
  margin-bottom: 20px; /* jarak ke konten bawah */
  font-weight: 600;
  font-size: 24px;
  color: #333;
}
  .card{background:white;padding:18px 20px;margin-bottom:12px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.07);transition:transform 0.2s, box-shadow 0.2s;}
  .card:hover{transform:translateY(-3px);box-shadow:0 6px 18px rgba(0,0,0,0.1);}
  button{cursor:pointer;border:none;border-radius:8px;transition:all 0.3s;}
  .add-btn{padding:8px 18px;margin-bottom:15px;background:#4CAF50;color:white;font-weight:500;box-shadow:0 3px 10px rgba(0,0,0,0.1);}
  .add-btn:hover{transform:scale(1.05);box-shadow:0 5px 15px rgba(0,0,0,0.15);}

.section {
  opacity: 0;
  transform: translateY(30px);
  display: none;
  animation: section-appear 0.8s ease forwards;
}

@keyframes section-appear {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.section.active {
  display: block;
  animation: section-appear 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}




  /* ===== Form ===== */
  .form-popup{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#ffffff;padding:25px 30px;box-shadow:0 8px 25px rgba(0,0,0,0.25);border-radius:12px;z-index:20;width:90%;max-width:400px;animation:popup-fade 0.3s ease;}
  @keyframes popup-fade{from{opacity:0;transform:translate(-50%,-48%);} to{opacity:1;transform:translate(-50%,-50%);}}
  .form-popup input,.form-popup textarea{width:100%;padding:10px;margin-bottom:12px;border-radius:8px;border:1px solid #ddd;resize:none;font-size:14px;}
  .form-popup textarea{height:80px;}
  .form-popup button{padding:10px 18px;}
  .save-btn{background:#4CAF50;color:white;}
  .save-btn:hover{transform:scale(1.05);}
  .cancel-btn{background:#f44336;color:white;}
  .cancel-btn:hover{transform:scale(1.05);}

  .zahra-photo {
  width: 120px;
  height: 120px;
  object-fit: cover;
  border-radius: 12px;
  position: relative;
  z-index: 1;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.zahra-photo {
  width:200px;
  height: 200px;
  object-fit: cover;
  border-radius: 12px;
  position: relative;
  z-index: 1;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.zahra-photo::after {
  content: '';
  position: absolute;
  top: -4px;
  left: -4px;
  width: calc(100% + 8px);
  height: calc(100% + 8px);
  background: linear-gradient(135deg, #4CAF50 50%, transparent 50%);
  border-radius: 14px;
  z-index: -1;
}

.logo {
  width: 55px;
  height: 55px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid #ccc;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 15px; /* push it a bit from the edge */
  margin-top: 10px;
  transition: all 0.4s ease;
}

.logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center top; /* focuses higher (face) */
  transition: transform 0.4s ease;
}


.logo:hover img {
  transform: scale(1.08);
}



/* ===== Attendance Calendar ===== */
/* ===== Attendance Calendar Styling Upgrade ===== */
/* ===== Mini Attendance Calendar ===== */
/* ===== Mini Attendance Calendar ===== */
.calendar-wrapper {
  background: #fff;
  padding: 12px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  margin-bottom: 20px;
  width: 100%;
  max-width: 360px; /* cukup lebar tapi masih responsive */
}

.calendar-wrapper h3 {
  text-align: center;
  margin-bottom: 10px;
  color: #4CAF50;
  font-weight: 600;
  font-size: 16px;
}

.calendar-header {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  text-align: center;
  font-weight: 600;
  font-size: 12px;
  margin-bottom: 6px;
  color: #555;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8px;
}

.calendar-grid div {
  padding: 14px 0;
  text-align: center;
  border-radius: 8px;
  background: #f8f8f8;
  font-weight: 500;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 32px;
}

.calendar-grid div:hover {
  background: #d1f0eb;  /* hover lebih jelas */
}

.calendar-grid div.present { background:#4CAF50; color:white; }
.calendar-grid div.absent { background:#f44336; color:white; }

.month-wrapper {
  display: flex;
  gap: 20px;
  margin-bottom: 30px;
  flex-wrap: wrap; /* biar responsive di HP */
  padding-left: 15px; /* tambahkan ini supaya kalender ga nempel ke kiri */
}

.notes-wrapper {
  flex: 1; /* ambil sisa space di kanan */
  min-width: 200px;
}

/* Animasi untuk calendar dan notes saat section active */
.calendar-wrapper,
.notes-wrapper {
  position: relative; /* supaya pseudo-element bisa diposisikan */
  overflow: hidden;
}

.calendar-wrapper::before,
.notes-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(76, 175, 80, 0.05); /* highlight lembut */
  transform: scaleY(0);
  transform-origin: top;
  transition: transform 0.5s ease;
  pointer-events: none;
}

.section.active .calendar-wrapper::before,
.section.active .notes-wrapper::before {
  transform: scaleY(1); /* animasi muncul */
}



  /* ===== Sidebar for Semester ===== */
  .doa-wrap{display:flex;gap:18px;align-items:flex-start}
  .sidebar{min-width:160px;background:linear-gradient(180deg,#eef2f7,#ffffff);border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:8px}
  .side-tab{padding:10px;border-radius:10px;text-align:center;font-weight:600;cursor:pointer;color:#475569;background:transparent}
  .side-tab.active{background:#4CAF50;color:#fff}
  .doa-content{flex:1;background:white;border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(2,6,23,0.04)}

  @media (max-width:720px){
    .doa-wrap{flex-direction:column}
    .sidebar{width:100%;display:flex;flex-direction:row;gap:8px;overflow:auto;padding:8px}
    .side-tab{text-align:center;white-space:nowrap;flex:0 0 auto}
  }

  .sub-tabs { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap;}
  .sub-tab { padding: 6px 14px; border-radius: 8px; background: #f0f2f5; border: none; font-weight: 600; cursor: pointer; transition: all 0.2s;}
  .sub-tab.active { background: #4CAF50; color: white;}

  /* Vocabulary grid layout */
  #vocab-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px; margin-top: 12px;}
  #vocab-list .card { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; gap: 8px; padding: 12px 20px; min-height: 60px; background: white; border-radius: 10px; box-shadow: 0 6px 18px rgba(2,6,23,0.06); transition: transform 0.18s, box-shadow 0.18s; cursor: pointer;}
  /* Animasi untuk setiap elemen di Attendance */
#attendance .month-wrapper {
  opacity: 0;
  transform: translateY(20px);
  animation: month-appear 0.6s forwards;
}

#attendance .month-wrapper:nth-child(1) { animation-delay: 0.1s; }
#attendance .month-wrapper:nth-child(2) { animation-delay: 0.3s; }
#attendance .month-wrapper:nth-child(3) { animation-delay: 0.5s; }
#attendance .month-wrapper:nth-child(4) { animation-delay: 0.7s; }
#attendance .month-wrapper:nth-child(5) { animation-delay: 0.9s; }

@keyframes month-appear {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animasi untuk card di notes */
#attendance .notes-wrapper .card,
#attendance .notes-wrapper .add-btn {
  opacity: 0;
  transform: translateY(10px);
  animation: card-appear 0.4s forwards;
}

#attendance .notes-wrapper .card:nth-child(1) { animation-delay: 0.2s; }
#attendance .notes-wrapper .card:nth-child(2) { animation-delay: 0.4s; }
#attendance .notes-wrapper .card:nth-child(3) { animation-delay: 0.6s; }
/* dst, nanti JS bisa tambahkan delay dinamis jika banyak card */

@keyframes card-appear {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</style>
</head>
<body>

<!-- ===== Intro Splash ===== -->
<div id="intro">
  <img src="Logo_UIN.jpeg" alt="UIN Logo">
   <img src="foto_Zahra.jpg" alt="Zahra Amelia" class="zahra-photo">
  <h1>Zahra Amelia Fam</h1>
  <button id="enter-btn">Enter</button>
</div>




<!-- ===== Navbar ===== -->
<div id="navbar">
  <div class="logo">
  <img src="foto_Zahra_copy.jpg" alt="Zahra Amelia" />
</div>

  <nav>
    <a href="#" onclick="showSection('home')">Home</a>
    <a href="#" onclick="showSection('vocabulary')">Vocabulary</a>
    <a href="#" onclick="showSection('semester')">Semester</a>
    <a href="#" onclick="showSection('attendance')">Attendance</a>

  </nav>
  <input type="text" id="search-input" placeholder="Search notes or vocab">
  <button onclick="searchEntries()" style="padding:6px 12px; margin-left:6px; background:#4CAF50; color:white; border:none; border-radius:6px; cursor:pointer;">Search</button>
</div>

<!-- ===== Main Content ===== -->
<div id="main-content">

  <!-- Home Section -->
  <div id="home" class="section">
    <h2>Welcome, Zahra Amelia Fam</h2>
    <p>Dashboard overview. Start building, adding vocabulary, and notes!</p>
  </div>

  <!-- Vocabulary Section -->
  <div id="vocabulary" class="section">
    <h2>Vocabulary</h2>
    <button class="add-btn" onclick="openForm('vocabulary')">+ Add New Word</button>
    <div id="vocab-list"></div>
  </div>

  <!-- Semester Section -->
  <div id="semester" class="section">
    <h2>Semester</h2>
    <div class="doa-wrap">
      <nav class="sidebar" id="semesterSidebar">
        <div class="side-tab active" data-side="semester1-content">Semester 1</div>
        <div class="side-tab" data-side="semester2">Semester 2</div>
        <div class="side-tab" data-side="semester3">Semester 3</div>
        <div class="side-tab" data-side="semester4">Semester 4</div>
      </nav>

      <div class="doa-content" id="semesterContent">
        <!-- Semester 1 Content -->
        <div id="semester1-content" class="side-content">
          <!-- Sub-tabs -->
          <div class="sub-tabs">
            <button class="sub-tab active" data-sub="iip">IIP</button>
            <button class="sub-tab" data-sub="reading">Reading</button>
            <button class="sub-tab" data-sub="bindo">B.Indo</button>
            <button class="sub-tab" data-sub="barab">B.Arab</button>
            <button class="sub-tab" data-sub="speaking">Speaking</button>
            <button class="sub-tab" data-sub="listening">Listening (LDC)</button>
            <button class="sub-tab" data-sub="grammar">Basic Grammar</button>
          </div>

          <div id="iip" class="sub-content" style="display:block;">
            <button class="add-btn" onclick="openForm('semester1-iip')">+ Add Note</button>
            <div id="list-semester1-iip"></div>
          </div>
          <div id="reading" class="sub-content" style="display:none;">
            <button class="add-btn" onclick="openForm('semester1-reading')">+ Add Note</button>
            <div id="list-semester1-reading"></div>
          </div>
          <div id="bindo" class="sub-content" style="display:none;">
            <button class="add-btn" onclick="openForm('semester1-bindo')">+ Add Note</button>
            <div id="list-semester1-bindo"></div>
          </div>
          <div id="barab" class="sub-content" style="display:none;">
            <button class="add-btn" onclick="openForm('semester1-barab')">+ Add Note</button>
            <div id="list-semester1-barab"></div>
          </div>
          <div id="speaking" class="sub-content" style="display:none;">
            <button class="add-btn" onclick="openForm('semester1-speaking')">+ Add Note</button>
            <div id="list-semester1-speaking"></div>
          </div>
          <div id="listening" class="sub-content" style="display:none;">
            <button class="add-btn" onclick="openForm('semester1-listening')">+ Add Note</button>
            <div id="list-semester1-listening"></div>
          </div>
          <div id="grammar" class="sub-content" style="display:none;">
            <button class="add-btn" onclick="openForm('semester1-grammar')">+ Add Note</button>
            <div id="list-semester1-grammar"></div>
          </div>
        </div>

        <div id="semester2" class="side-content" style="display:none">
          <button class="add-btn" onclick="openForm('semester2')">+ Add Note</button>
          <div id="list-semester2"></div>
        </div>
        <div id="semester3" class="side-content" style="display:none">
          <button class="add-btn" onclick="openForm('semester3')">+ Add Note</button>
          <div id="list-semester3"></div>
        </div>
        <div id="semester4" class="side-content" style="display:none">
          <button class="add-btn" onclick="openForm('semester4')">+ Add Note</button>
          <div id="list-semester4"></div>
        </div>
      </div>
    </div>
  </div>

</div>

  <!-- ===== Attendance Section ===== -->
<div id="attendance" class="section">
  <h2>Attendance</h2>

  <div class="month-wrapper">
    <div class="calendar-wrapper" id="calendar-august"></div>
    <div class="notes-wrapper" id="notes-august"></div>
  </div>

  <div class="month-wrapper">
    <div class="calendar-wrapper" id="calendar-september"></div>
    <div class="notes-wrapper" id="notes-september"></div>
  </div>

  <div class="month-wrapper">
    <div class="calendar-wrapper" id="calendar-october"></div>
    <div class="notes-wrapper" id="notes-october"></div>
  </div>

  <div class="month-wrapper">
    <div class="calendar-wrapper" id="calendar-november"></div>
    <div class="notes-wrapper" id="notes-november"></div>
  </div>

  <div class="month-wrapper">
    <div class="calendar-wrapper" id="calendar-december"></div>
    <div class="notes-wrapper" id="notes-december"></div>
  </div>
</div>


<!-- ===== Form Popup ===== -->
<div id="form-popup" class="form-popup">
  <h3 id="form-title"></h3>
  <input type="text" id="input-title" placeholder="Title / Word">
  <textarea id="input-content" placeholder="Meaning / Note"></textarea>
  <button class="save-btn" onclick="saveEntry()">Save</button>
  <button class="cancel-btn" onclick="closeForm()">Cancel</button>
</div>

<script>
  const intro = document.getElementById('intro');
  const mainContent = document.getElementById('main-content');
  document.getElementById('enter-btn').addEventListener('click', () => {
    intro.classList.add('fade-out');
    setTimeout(()=> mainContent.style.display='block', 1000);
  });

  function showSection(id) {
  const sections = ['home','vocabulary','semester','attendance'];
  sections.forEach(sec => {
    const el = document.getElementById(sec);
    if (sec === id) {
      el.style.display = 'block';
      setTimeout(() => {
        el.classList.add('active');

        // Jika Attendance, reset animasi month-wrapper
        if (sec === 'attendance') {
          const months = el.querySelectorAll('.month-wrapper');
          months.forEach(m => {
            m.style.opacity = 0;
            m.style.transform = 'translateY(20px)';
          });
          setTimeout(() => months.forEach(m => m.style.animationPlayState = 'running'), 50);
        }

      }, 20);
    } else {
      el.classList.remove('active');
      setTimeout(() => el.style.display = 'none', 400); 
    }
  });
}



  showSection('home');

  const semesterTabs = document.querySelectorAll('#semesterSidebar .side-tab');
  semesterTabs.forEach(tab => {
    tab.addEventListener('click', () => {
      semesterTabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      document.querySelectorAll('#semesterContent .side-content').forEach(c => c.style.display='none');
      const target = tab.getAttribute('data-side');
      document.getElementById(target).style.display='block';
    });
  });

  let currentSection = '';
  let currentEditIndex = null;

  function openForm(section){
    currentSection = section;
    document.getElementById('form-title').innerText = 'Add Note';
    document.getElementById('input-title').value='';
    document.getElementById('input-content').value='';
    document.getElementById('form-popup').style.display='block';
  }

  function closeForm(){
    document.getElementById('form-popup').style.display='none';
  }

  function saveEntry() {
    const title = document.getElementById('input-title').value.trim();
    const content = document.getElementById('input-content').value.trim();
    if (!title || !content) return alert('Fill all fields');

    let list = JSON.parse(localStorage.getItem(currentSection)) || [];

    if (typeof currentEditIndex === 'number') {
      list[currentEditIndex] = { title, content };
      currentEditIndex = null;
    } else {
      list.push({ title, content });
    }

    localStorage.setItem(currentSection, JSON.stringify(list));
    closeForm();

    // Kalau currentSection termasuk bulan, pakai renderMonthNotes
    if(['august','september','october','november','december'].includes(currentSection)){
        renderMonthNotes(currentSection);
    } else {
        renderList(currentSection);
    }
}


  function renderList(section){
    const container = document.getElementById(
      section==='vocabulary'?'vocab-list':'list-' + section
    );
    if(!container) return;
    container.innerHTML='';
    let list = JSON.parse(localStorage.getItem(section)) || [];
    list.forEach((item, index) => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `
        <strong>${item.title}</strong>
        <p>${item.content}</p>
        <div style="display:flex;gap:6px;">
          <button style="background:#f44336; color:white; border:none; border-radius:6px; padding:4px 10px; cursor:pointer;" onclick="deleteEntry('${section}', ${index})">Delete</button>
          <button style="background:#4CAF50; color:white; border:none; border-radius:6px; padding:4px 10px; cursor:pointer;" onclick="editEntry('${section}', ${index})">Edit</button>
        </div>
      `;
      container.appendChild(div);
    });
  }

  function deleteEntry(key,index){
  let list = JSON.parse(localStorage.getItem(key)) || [];
  list.splice(index,1);
  localStorage.setItem(key, JSON.stringify(list));

  if(['august','september','october','november','december'].includes(key)){
      renderMonthNotes(key);
  } else {
      renderList(key);
  }
}

function editEntry(section, index) {
  const list = JSON.parse(localStorage.getItem(section)) || [];
  const item = list[index];
  currentSection = section;
  currentEditIndex = index;
  document.getElementById('form-title').innerText = 'Edit Note';
  document.getElementById('input-title').value = item.title;
  document.getElementById('input-content').value = item.content;
  document.getElementById('form-popup').style.display = 'block';
}


  renderList('vocabulary');
  ['semester1-iip','semester1-reading','semester1-bindo','semester1-barab','semester1-speaking','semester1-listening','semester1-grammar','semester2','semester3','semester4'].forEach(renderList);

  // Sub-tab functionality
  document.addEventListener("DOMContentLoaded", () => {
    const subTabs = document.querySelectorAll('.sub-tab');
    subTabs.forEach(btn => {
      btn.addEventListener('click', () => {
        const parent = btn.closest('.sub-tabs');
        parent.querySelectorAll('.sub-tab').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        parent.parentElement.querySelectorAll('.sub-content').forEach(c => c.style.display='none');
        document.getElementById(btn.getAttribute('data-sub')).style.display='block';
      });
    });
  });

  function searchEntries() {
    const query = document.getElementById('search-input').value.toLowerCase();
    ['vocabulary','semester1-iip','semester1-reading','semester1-bindo','semester1-barab','semester1-speaking','semester1-listening','semester1-grammar','semester2','semester3','semester4'].forEach(section=>{
      const container = document.getElementById(section==='vocabulary'?'vocab-list':'list-'+section);
      if(!container) return;
      const list = JSON.parse(localStorage.getItem(section)) || [];
      container.innerHTML='';
      list.filter(item=>item.title.toLowerCase().includes(query) || item.content.toLowerCase().includes(query))
      .forEach((item,index)=>{
        const div = document.createElement('div');
        div.className='card';
        div.innerHTML=`<strong>${item.title}</strong><p>${item.content}</p>`;
        container.appendChild(div);
      });
    });
  }

  function createSearchBar(sub) {
  const container = document.getElementById('list-' + sub);
  const searchBar = document.createElement('input');
  searchBar.type = 'text';
  searchBar.placeholder = 'Search note...';
  searchBar.style.cssText = 'width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;margin-bottom:10px;';
  
  searchBar.addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const list = JSON.parse(localStorage.getItem(sub)) || [];
    container.innerHTML = ''; // kosongkan hasil lama
    
    list.forEach((item, index) => {
      if (item.title.toLowerCase().includes(query) || item.content.toLowerCase().includes(query)) {
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `
          <strong>${item.title}</strong>
          <p>${item.content}</p>
          <div style="display:flex;gap:6px;">
            <button style="background:#f44336;color:white;border:none;border-radius:6px;padding:4px 10px;cursor:pointer;" onclick="deleteEntry('${sub}', ${index})">Delete</button>
            <button style="background:#4CAF50;color:white;border:none;border-radius:6px;padding:4px 10px;cursor:pointer;" onclick="editEntry('${sub}', ${index})">Edit</button>
          </div>
        `;
        container.appendChild(div);
      }
    });
  });
  
  // sisipkan search bar di atas daftar catatan
  const parent = container.parentElement;
  const addNoteBtn = parent.querySelector('button[onclick^="addNote"]');
  addNoteBtn.insertAdjacentElement('afterend', searchBar);
}

// ===== Attendance Calendar =====
// ===== Attendance Calendar with Month Names =====
function renderMonthCalendar(containerId, year, month, monthName) {
  const calendar = document.getElementById(containerId);
  if (!calendar) return;

  const daysInMonth = new Date(year, month + 1, 0).getDate();
  const firstDay = new Date(year, month, 1).getDay();
  const stored = JSON.parse(localStorage.getItem("attendance")) || {};
  const days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

  // Clear previous content
  calendar.innerHTML = "";

  // Month title
  const title = document.createElement("h3");
  title.textContent = monthName + " " + year;
  title.style.textAlign = "center";
  title.style.marginBottom = "10px";
  title.style.color = "#4CAF50";
  title.style.fontWeight = "600";
  calendar.appendChild(title);

  // Header
  const header = document.createElement("div");
  header.className = "calendar-header";
  days.forEach(d => {
    const dayDiv = document.createElement("div");
    dayDiv.textContent = d;
    header.appendChild(dayDiv);
  });
  calendar.appendChild(header);

  // Grid
  const grid = document.createElement("div");
grid.className = "calendar-grid"; // pakai CSS class
grid.style.gridTemplateColumns = "repeat(7,1fr)";
grid.style.marginBottom = "15px"; // jarak antar bulan


  // Empty slots for first day
  for (let i = 0; i < firstDay; i++) {
    const empty = document.createElement("div");
    empty.style.visibility = "hidden";
    grid.appendChild(empty);
  }

  // Days
  for (let day = 1; day <= daysInMonth; day++) {
    const dateKey = `${year}-${month + 1}-${day}`;
    const div = document.createElement("div");
    div.textContent = day;

    if (stored[dateKey] === "present") div.classList.add("present");
    else if (stored[dateKey] === "absent") div.classList.add("absent");

    div.addEventListener("click", () => {
      if (!stored[dateKey]) stored[dateKey] = "present";
      else if (stored[dateKey] === "present") stored[dateKey] = "absent";
      else delete stored[dateKey];
      localStorage.setItem("attendance", JSON.stringify(stored));
      renderMonthCalendar(containerId, year, month, monthName);
    });

    grid.appendChild(div);
  }

  calendar.appendChild(grid);
}


// Render all months with names
renderMonthCalendar("calendar-august", 2025, 7, "August");
renderMonthCalendar("calendar-september", 2025, 8, "September");
renderMonthCalendar("calendar-october", 2025, 9, "October");
renderMonthCalendar("calendar-november", 2025, 10, "November");
renderMonthCalendar("calendar-december", 2025, 11, "December");

function openMonthNoteForm(month){
  currentSection = month;
  document.getElementById('form-title').innerText = 'Add Note';
  document.getElementById('input-title').value='';
  document.getElementById('input-content').value='';
  document.getElementById('form-popup').style.display='block';
}

function renderMonthNotes(month){
  const container = document.getElementById('notes-' + month);
  container.innerHTML = '';
  let list = JSON.parse(localStorage.getItem(month)) || [];
  list.forEach((item,index)=>{
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <strong>${item.title}</strong>
      <p>${item.content}</p>
      <div style="display:flex;gap:6px;margin-top:6px;">
        <button style="background:#f44336;color:white;border:none;border-radius:6px;padding:4px 10px;cursor:pointer;" onclick="deleteEntry('${month}', ${index})">Delete</button>
        <button style="background:#4CAF50;color:white;border:none;border-radius:6px;padding:4px 10px;cursor:pointer;" onclick="editEntry('${month}', ${index})">Edit</button>
      </div>
    `;
    container.appendChild(div);
  });

  // tombol tambah note
  const addBtn = document.createElement('button');
  addBtn.className = 'add-btn';
  addBtn.innerText = '+ Add Note';
  addBtn.onclick = ()=>openMonthNoteForm(month);
  container.prepend(addBtn);
}

// render semua bulan
['august','september','october','november','december'].forEach(renderMonthNotes);

</script>
</body>
</html>
